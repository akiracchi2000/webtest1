<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>達成状況一覧</title>
    
    <style>
        /* ページの基本スタイル */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 2em 0;
            background-color: #f4f7f6;
            box-sizing: border-box;
        }

        /* コンテナ */
        .main-container {
            max-width: 700px;
            width: 90%;
            background: #fff;
            padding: 2em 3em;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin: 0 0 1.5em 0;
        }
        
        h3 {
             color: #2c3e50;
             margin-bottom: 0.5em;
             border-left: 5px solid #3498db;
             padding-left: 10px;
             text-align: left;
        }
        
        p {
            line-height: 1.6;
        }

        /* 達成状況リスト */
        #achievement-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 2em;
        }
        
        .achievement-item {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1.2em;
            border: 1px solid #e9ecef;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .achievement-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        .test-id {
            font-weight: bold;
            font-size: 1.2em;
            color: #495057;
            margin-bottom: 0.5em;
        }
        
        .status-icon {
            font-size: 2.5em;
        }
        .status-icon.musou {
            color: #c0392b; /* 無双モード (王冠) */
        }
        .status-icon.normal {
            color: #f1c40f; /* ノーマル (スター) */
        }
        .status-icon.none {
            color: #ced4da; /* 未達成 */
        }
        
        /* コントロールエリア */
        .controls {
            text-align: center;
            max-width: 600px;
            margin: 1em auto;
            border-top: 1px solid #ddd; 
            padding-top: 1.5em;
        }
        
        .controls p {
             font-size: 0.9em; 
             color: #6c757d;
        }

        /* ボタン共通スタイル */
        .home-btn, .reset-btn {
            display: inline-block;
            margin-top: 1em;
            padding: 12px 30px;
            font-size: 1.1em;
            text-decoration: none;
            color: #fff;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.2s;
        }
        
        .home-btn {
            background-color: #6c757d;
        }
        .home-btn:hover {
            background-color: #5a6268;
        }

        .reset-btn {
            background-color: #dc3545; /* 赤色 */
        }
        .reset-btn:hover {
            background-color: #c82333; /* 濃い赤色 */
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

    <div class="main-container">
        <h1>達成状況</h1>
        
        <h3>🏆 獲得トロフィー 🏆</h3>
        
        <ul id="achievement-list">
            </ul>
        
        <div class="controls">
            <h3>⚠️ データ管理</h3>
            <p>スター(⭐)やクラウン(👑)の達成状況を<br>すべてリセットします。</p>
            <button id="reset-achievements-btn" class="reset-btn">全達成状況をリセット</button>
        </div>
        
        <a href="./index.html" class="home-btn">トップページに戻る</a>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 達成状況の表示 ---
            
            // ★ ここに対象となるテストIDと表示名を追加・編集してください
            const testList = [
                { id: "test1", title: "正負の数(初)" },
                { id: "test2", title: "正負の数(上)" },
                { id: "test3", title: "1次文字式(初)" },
                { id: "test4", title: "1次文字式(中)" },
                { id: "test5", title: "1次文字式(上)" },
                { id: "test6", title: "平方根(初)" },
                { id: "test7", title: "平方根(中)" },
                { id: "test8", title: "平方根(上)" }
                // 今後 test10, test11... と追加
            ];
            
            const achievements = JSON.parse(localStorage.getItem('quizAchievements')) || {};
            const listElement = document.getElementById('achievement-list');
            
            if (testIds.length === 0) {
                 listElement.innerHTML = "<p>対象のテストがありません。</p>";
                 return;
            }

            testIds.forEach(id => {
                const status = achievements[id]; // "musou", "normal", または undefined
                let icon = '➖';
                let iconClass = 'none';
                
                if (status === 'musou') {
                    icon = '👑'; // 無双モード (王冠)
                    iconClass = 'musou';
                } else if (status === 'normal') {
                    icon = '⭐'; // ノーマル (スター)
                    iconClass = 'normal';
                }
                
                const item = document.createElement('li');
                item.className = 'achievement-item';
                item.innerHTML = `
                    <div class="test-id">${id}</div>
                    <div class="status-icon ${iconClass}">${icon}</div>
                `;
                listElement.appendChild(item);
            });
            
            
            // --- リセット機能 ---
            const resetButton = document.getElementById('reset-achievements-btn');
            
            if (resetButton) {
                resetButton.addEventListener('click', () => {
                    // ユーザーに最終確認
                    const isConfirmed = confirm('本当にすべての達成状況（⭐と👑）をリセットしますか？\nこの操作は元に戻せません。');
                    
                    if (isConfirmed) {
                        // 'quizAchievements' のデータをlocalStorageから削除
                        localStorage.removeItem('quizAchievements');
                        
                        // 削除したことを通知
                        alert('達成状況をリセットしました。');
                        
                        // ページをリロードして表示に反映
                        location.reload();
                    }
                });
            }
            
        });
    </script>

</body>
</html>
